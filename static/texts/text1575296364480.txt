<h1 style="text-align:start;" size="1" _root="[object Object]" __ownerid="undefined" __hash="undefined" __altered="false">Linux下nginx的安装以及环境配置</h1><p></p><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" src="http://localhost:3001/static/images/image.1575296323595.png"/></div><p></p><p>Nginx(engine x) 是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务。</p><p></p><p>下载地址：<a href="http://nginx.org/en/download.html">http://nginx.org/en/download.html</a></p><p></p><p><span style="color:#c0392b"><strong>第一步：下载nginx压缩包</strong></span></p><p>下载、解压、移动文件到/usr/local下，不能改名为nginx，下面步骤会生成nginx文件夹，同名会报错</p><pre><code>wget http://nginx.org/download/nginx-1.16.1.tar.gz<br/>tar -xvf nginx-1.16.1.tar.gz<br/>mv ./nginx-1.16.1 /usr/local/nginx-1.16.1</code></pre><p></p><p><span style="color:#c0392b"><strong>第二步：配置nginx安装所需的环境</strong></span></p><p><strong>1. 安装gcc</strong></p><p>安装 nginx 需要先将官网下载的源码进行编译，编译依赖 gcc 环境。安装指令如下：</p><pre><code>yum install gcc-c++</code></pre><p><strong>2. 安装PCRE pcre-devel</strong></p><p>Nginx的Rewrite模块和HTTP核心模块会使用到PCRE正则表达式语法。这里需要安装两个安装包pcre和pcre-devel。第一个安装包提供编译版本的库，而第二个提供开发阶段的头文件和编译项目的源代码。安装指令如下：</p><pre><code>yum install -y pcre pcre-devel</code></pre><p><strong>3.安装zlib</strong></p><p><span style="color:#4d4d4d"><span style="font-size:16px"><span style="background-color:#ffffff">zlib库提供了开发人员的压缩算法，在Nginx的各种模块中需要使用gzip压缩。安装指令如下:</span></span></span></p><pre><code>yum install -y zlib zlib-devel</code></pre><p><strong>4.安装Open SSL</strong></p><p><span style="color:#4d4d4d"><span style="font-size:16px"><span style="background-color:#ffffff">nginx不仅支持 http协议，还支持 https（即在 ssl 协议上传输 http），如果使用了 https，需要安装 OpenSSL 库。安装指令如下：</span></span></span></p><pre><code>yum install -y openssl openssl-devel</code></pre><p><strong>5.<span style="color:#4d4d4d"><span style="font-size:16px"><span style="background-color:#ffffff">进行配置</span></span></span></strong></p><p><span style="color:#4d4d4d"><span style="font-size:16px"><span style="background-color:#ffffff">推荐使用默认配置，直接./configure就好了</span></span></span></p><pre><code>cd nginx<br/>./configure</code></pre><p>配置成功如下图：</p><p></p><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" src="http://localhost:3001/static/images/image.1575297403010.png"/></div><p></p><p><span style="color:#c0392b"><strong>第三步：编译安装nginx</strong></span></p><p><span style="color:#4d4d4d"><span style="font-size:16px"><span style="background-color:#ffffff">这里和redis的编译安装比较类似，首先在当前目录（/usr/local/nginx-1.16.1）进行编译。输入make即可</span></span></span></p><pre><code>make</code></pre><p><span style="color:#4d4d4d"><span style="font-size:16px"><span style="background-color:#ffffff">然后回车，如果编译出错，请检查是否前面的4个安装都没有问题。</span></span></span></p><p><span style="color:#4d4d4d"><span style="font-size:16px"><span style="background-color:#ffffff">编译成功之后，就可以安装了，输入以下指令：</span></span></span></p><pre><code>make install</code></pre><p><span style="color:#4d4d4d"><span style="font-size:16px"><span style="background-color:#ffffff">ok，安装成功。</span></span></span></p><p><span style="color:#4d4d4d"><span style="font-size:16px"><span style="background-color:#ffffff">会在同目录下生成nginx文件夹</span></span></span></p><p><span style="color:#4d4d4d"><span style="font-size:16px"><span style="background-color:#ffffff">这时候返回上一级目录，就会发现多了nginx目录，接下来，启动nginx。</span></span></span></p><p></p><p><span style="color:#c0392b"><strong>第四步：启动nginx</strong></span></p><p>进入/usr/local/nginx/sbin目录，输入./nginx即可启动nginx</p><pre><code>./nginx</code></pre><p><span style="color:#4d4d4d"><span style="font-size:16px"><span style="background-color:#ffffff">关闭nginx</span></span></span></p><pre><code>./nginx -s quit  或者 ./nginx -s stop</code></pre><p><span style="color:#4d4d4d"><span style="font-size:16px"><span style="background-color:#ffffff">重启nginx</span></span></span></p><pre><code>./nginx -s reload</code></pre><p><span style="color:#4d4d4d"><span style="font-size:16px"><span style="background-color:#ffffff">查看nginx进程</span></span></span></p><pre><code>ps aux|grep nginx</code></pre><p><span style="color:#4d4d4d"><span style="font-size:16px"><span style="background-color:#ffffff">设置nginx开机启动，只需在rc.local增加启动代码即可。</span></span></span></p><pre><code>vim /etc/rc.local</code></pre><p><span style="color:#4d4d4d"><span style="font-size:16px"><span style="background-color:#ffffff">然后在底部增加/usr/local/nginx/sbin/nginx</span></span></span></p><p></p><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" src="http://localhost:3001/static/images/image.1575338847754.png"/></div><p></p><p></p><p></p><p></p><p></p><p></p><p></p>